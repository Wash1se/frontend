(function(){"use strict";var e={3527:function(e,t,s){var r=s(9242),i=s(3396);function a(e,t,s,r,a,n){const o=(0,i.up)("Header"),l=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o),(0,i.Wm)(l)])}const n={class:"navbar navbar-expand-lg navbar-dark bg-dark"},o={class:"collapse navbar-collapse justify-content-md-center",id:"navbarsExample08"},l={class:"navbar-nav"},c={class:"nav-item active"},u=(0,i.Uk)(" Home "),d={key:0},h={class:"nav-item active"},m=(0,i.Uk)(" Register "),p={class:"nav-item"},g=(0,i.Uk)(" Login "),y={key:1};function f(e,t,s,r,a,f){const k=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("nav",n,[(0,i._)("div",o,[(0,i._)("ul",l,[(0,i._)("li",c,[(0,i.Wm)(k,{to:"/"},{default:(0,i.w5)((()=>[u])),_:1})]),!1===r.store.authenticated?((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("li",h,[(0,i.Wm)(k,{to:"/auth/register"},{default:(0,i.w5)((()=>[m])),_:1})]),(0,i._)("li",p,[(0,i.Wm)(k,{to:"/auth/login"},{default:(0,i.w5)((()=>[g])),_:1})])])):(0,i.kq)("",!0),!0===r.store.authenticated?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>f.logout&&f.logout(...e))},"Logout")])):(0,i.kq)("",!0)])])])}var k=s(3766),v=s(5269),_=s.n(v),w=s(6265),S=s.n(w);const T=S().create();T.interceptors.request.use((e=>{const t=P();return t.getToken&&(e.headers={authorization:"Access "+t.getToken}),e})),T.interceptors.response.use((e=>{const t=P();return t.getToken&&(e.headers={authorization:"Access "+t.getToken}),e}),(e=>{const t=P();if("Access token is expired"===e.response.data.error&&(t.access_expired=!0,!0===t.access_expired&&!0===t.authenticated)){const s=_().get("refresh");return T.post(t.mainAuthUrl+"refresh/",{refresh:s}).then((s=>(t.changeAccess(s.data.access),_().set("refresh",s.data.refresh,"7d"),e.config.headers.authorization="Access "+t.getToken,T.request(e.config)))).catch((e=>(console.log(123123),t.logout(),Promise.reject(e))))}return"Authentication credentials were not provided."===e.response.data.error&&t.getToken?(e.config.headers.authorization="Access "+t.getToken,T.request(e.config)):Promise.reject(e)}));var b=T;const P=(0,k.Q_)("token",{state:()=>({token:null,mainUrl:"https://music-platform228.herokuapp.com/",mainAuthUrl:"https://music-platform228.herokuapp.com/auth/",mediaUrl:"https://res.cloudinary.com/degn0i1cg/raw/upload/v1/",authenticated:!1,access_expired:!0,musicPlaylist:null}),getters:{getToken:e=>e.token},actions:{async getTokenFromBack(e,t){if(e&&t){const s=await b.post(this.mainAuthUrl+"login/",{email:e,password:t}).then((e=>{this.token=e.data.tokens.access,this.authenticated=!0,this.access_expired=!1,_().set("refresh",e.data.tokens.refresh,"7d");let t=null,s="success",r="Success",i=!1;return window.location.href="/",{field:t,type:s,header:r,hide_message:i}})).catch((e=>{let t=e.response.data.detail,s="error",r=e.response.data.error,i=!1;return{field:t,type:s,header:r,hide_message:i}}));return s}{let e=null,t="error",s="please enter email and password",r=!1;return{field:e,type:t,header:s,hide_message:r}}},async logout(){const e={tokens:{access:this.token,refresh:_().get("refresh")}};b.post(this.mainAuthUrl+"logout/",e).then((()=>{this.token=null,_().remove("refresh"),this.authenticated=!1,this.refresh_expired=!0,window.location.href="/",document.location.reload()})).catch((e=>{console.log(e)}))},async changeAccess(e){this.token=e,this.access_expired=!1},async setMusicPlaylist(e){this.musicPlaylist=e}},persist:{enabled:!0}});var x={setup(){const e=P();return{store:e}},data(){return{}},methods:{logout(){this.store.logout()}}},M=s(89);const C=(0,M.Z)(x,[["render",f]]);var D=C;const A=(0,k.Q_)("PlayerTracklist",{state:()=>({musicPlaylist:null,currentlyPlaying:!1,currentSong:0,waves_active:null,currentVolumeBar:100}),actions:{async setMusicPlaylist(e){this.musicPlaylist=e}},persist:{enabled:!0}});var V={setup(){const e=A(),t=A();return{PlayerTracklistStore:e,TokenStore:t}},components:{Header:D},data(){return{}}};const j=(0,M.Z)(V,[["render",a]]);var I=j,U=s(3282),W=s(8709);const B=(0,k.WB)(),E=(0,W.g)({stores:["token"],storage:localStorage}),O=(0,W.g)({stores:["PlayerTracklist"],storage:sessionStorage});B.use(E),B.use(O);var q=B,z=s(678),R=s(7139);const L=(0,i._)("h1",null,"Main page",-1),Z={key:0},F=(0,i.uE)('<div style="padding:0px 20px;margin:10px 0 10px 0;"><table class="naming"><td class="id-or-waves"></td><td class="song-img-name-and-author"> Title </td><td class="song-album"> Album </td><td class="liked"></td><td class="song-duration"><i class="bi bi-clock"></i></td></table></div>',1);function $(e,t,s,r,a,n){const o=(0,i.up)("Message"),l=(0,i.up)("MusicPlayer"),c=(0,i.up)("VueTracklist");return(0,i.wg)(),(0,i.iD)(i.HY,null,[L,(0,i.Wm)(o,{type:a.type,header:a.header,hide_message:a.hide_message,onReturned_show_value:t[0]||(t[0]=e=>a.hide_message=e)},null,8,["type","header","hide_message"]),r.store.authenticated?((0,i.wg)(),(0,i.iD)("div",Z,[F,(0,i.Wm)(l),(0,i.Wm)(c),(0,i._)("h1",null,(0,R.zw)(r.playerTracklistStore.musicPlaylist),1)])):(0,i.kq)("",!0)],64)}const H={class:"header"};function G(e,t,s,r,a,n){return(0,i.wg)(),(0,i.iD)("div",null,[a.hidden?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,R.C_)(["ui message",s.type])},[(0,i._)("i",{class:"close icon",onClick:t[0]||(t[0]=(...e)=>n.hide&&n.hide(...e))}),(0,i._)("div",H,(0,R.zw)(s.header),1),(0,i.WI)(e.$slots,"default")],2))])}var X={props:{type:{type:String,default:"info"},header:{type:String,default:null},hide_message:{type:Boolean,default:!0}},data(){return{hidden:!0}},watch:{$props:{handler(){this.hidden=this.hide_message},deep:!0,immediate:!0}},methods:{hide(){this.hidden=!0,this.$emit("returned_show_value",this.hidden)}}};const Y=(0,M.Z)(X,[["render",G]]);var Q=Y;const K=e=>((0,i.dD)("data-v-3b5bfe34"),e=e(),(0,i.Cn)(),e),N={class:"audioPlayerList"},J={style:{padding:"0px 20px",margin:"10px 0 10px 0"}},ee=["onMouseover","onClick"],te={class:"id-waves-or-btn",style:{"justify-content":"center!important"}},se=["onClick"],re={key:1,style:{display:"flex","justify-content":"center",width:"100%"},class:"index"},ie={key:2,class:"wave active"},ae=K((()=>(0,i._)("div",{class:"wave1"},null,-1))),ne=K((()=>(0,i._)("div",{class:"wave1"},null,-1))),oe=K((()=>(0,i._)("div",{class:"wave1"},null,-1))),le=[ae,ne,oe],ce={class:"song-info"},ue=["src"],de=K((()=>(0,i._)("br",null,null,-1))),he={class:"subtitle"},me=K((()=>(0,i._)("td",{class:"album"},"Пока пусто",-1))),pe=K((()=>(0,i._)("td",{class:"is-liked"},[(0,i._)("i",{class:"bi fas bi-heart-fill"})],-1))),ge={class:"duration"};function ye(e,t,s,a,n,o){const l=(0,i.up)("v-icon");return(0,i.wg)(),(0,i.iD)("div",N,[(0,i._)("div",J,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.musicPlaylist,((e,s)=>((0,i.wg)(),(0,i.iD)("table",{class:"item",key:e.id,onMouseover:t=>n.highlighted=e.id,onMouseleave:t[0]||(t[0]=e=>n.highlighted=null),onClick:e=>this.emitter.emit("clickTrackTemplate",s)},[(0,i._)("td",te,[n.highlighted===e.id?((0,i.wg)(),(0,i.j4)(r.uT,{key:0,name:"fade",mode:"out-in",style:{display:"flex","justify-content":"center",width:"100%"},appear:""},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)("a",{class:"button play",onClick:e=>this.emitter.emit("playPauseAudio",s),title:"Play/Pause Song",key:a.playerTracklistStore.currentSong+a.playerTracklistStore.currentlyPlaying},[((0,i.wg)(),(0,i.j4)(l,{name:a.playerTracklistStore.currentlyPlaying&&a.playerTracklistStore.currentSong===s?"hi-solid-pause":"bi-play-circle-fill",key:1,class:"icon",scale:"2",fill:"red"},null,8,["name"]))],8,se))])),_:2},1024)):(0,i.kq)("",!0),n.highlighted!=e.id&&a.playerTracklistStore.waves_active!=s?((0,i.wg)(),(0,i.iD)("div",re,(0,R.zw)(s+1),1)):(0,i.kq)("",!0),a.playerTracklistStore.waves_active===s&&n.highlighted!=e.id?((0,i.wg)(),(0,i.iD)("div",ie,le)):(0,i.kq)("",!0)]),(0,i._)("td",ce,[(0,i._)("img",{class:"song-img",src:a.store.mediaUrl+e.icon_path,alt:""},null,8,ue),(0,i._)("h5",null,[(0,i.Uk)((0,R.zw)(e.song_name)+" ",1),de,(0,i._)("div",he,(0,R.zw)(e.song_author),1)])]),me,pe,(0,i._)("td",ge,(0,R.zw)(e.duration),1)],40,ee)))),128))])])}var fe={name:"trackList",setup(){const e=P(),t=A();return{store:e,playerTracklistStore:t}},data(){return{highlighted:null,musicPlaylist:this.playerTracklistStore.musicPlaylist}},methods:{isCurrentSong:function(e){return this.playerTracklistStore.currentSong==e}},mounted(){}};const ke=(0,M.Z)(fe,[["render",ye],["__scopeId","data-v-3b5bfe34"]]);var ve=ke;const _e=e=>((0,i.dD)("data-v-37286237"),e=e(),(0,i.Cn)(),e),we={class:"audioPlayerUI"},Se={class:"albumDetails"},Te=["src"],be={style:{width:"70%",display:"flex","flex-wrap":"wrap","flex-direction":"column","justify-content":"center"}},Pe={class:"timeAndProgress"},xe={class:"playerButtons"},Me=["title"],Ce=["title"],De={style:{display:"flex","justify-content":"space-around","align-items":"center",margin:"0 0 1rem 0"}},Ae={class:"currentTime"},Ve={class:"currentProgressBar",ref:"progress"},je={key:0,class:"dot"},Ie={class:"totalTime"},Ue={class:"volumePart",style:{display:"flex","justify-content":"center","align-items":"center",padding:"0 1rem 0 1rem"}},We=_e((()=>(0,i._)("i",{class:"bi bi-volume-down-fill",style:{color:"black","font-size":"2.5rem"}},null,-1))),Be={class:"currentVolumeBar",ref:"volumeProgress"},Ee={key:0,class:"dot"};function Oe(e,t,s,a,n,o){const l=(0,i.up)("v-icon");return(0,i.wg)(),(0,i.iD)("div",we,[(0,i._)("div",Se,[(0,i.Wm)(r.uT,{name:"slide-fade",mode:"out-in",appear:""},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)("img",{class:"image",key:a.playerTracklistStore.currentSong,src:a.store.mediaUrl+a.playerTracklistStore.musicPlaylist[a.playerTracklistStore.currentSong].icon_path,alt:""},null,8,Te))])),_:1}),(0,i._)("div",be,[(0,i.Wm)(r.uT,{name:"slide-fade",mode:"out-in",appear:""},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)("p",{class:"title",key:a.playerTracklistStore.currentSong},(0,R.zw)(a.playerTracklistStore.musicPlaylist[a.playerTracklistStore.currentSong].song_name),1))])),_:1}),(0,i.Wm)(r.uT,{name:"slide-fade",mode:"out-in",appear:""},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)("p",{class:"artist",key:a.playerTracklistStore.currentSong},(0,R.zw)(a.playerTracklistStore.musicPlaylist[a.playerTracklistStore.currentSong].song_author),1))])),_:1})])]),(0,i._)("div",Pe,[(0,i._)("div",xe,[(0,i._)("a",{class:"button",id:"mode",onClick:t[0]||(t[0]=e=>o.switchMode(n.Mode[1].title)),title:n.Mode[1].title},[(0,i.Wm)(l,{name:n.Mode[1].icon,class:(0,R.C_)(["icon",{selected:1===n.modeIndex}]),scale:"1.2"},null,8,["name","class"])],8,Me),(0,i._)("a",{class:"button",onClick:t[1]||(t[1]=e=>o.prevSong()),title:"Previous Song"},[(0,i.Wm)(l,{name:"bi-skip-start-fill",class:"icon",scale:"2"})]),(0,i.Wm)(r.uT,{name:"fade",mode:"out-in",appear:""},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)("a",{class:"button play",onClick:t[2]||(t[2]=e=>o.playPauseAudio(a.playerTracklistStore.currentSong)),title:"Play/Pause Song",key:a.playerTracklistStore.currentSong+a.playerTracklistStore.currentlyPlaying},[((0,i.wg)(),(0,i.j4)(l,{name:a.playerTracklistStore.currentlyPlaying?"hi-solid-pause":"bi-play-circle-fill",key:1,class:"icon",scale:"2",fill:"red"},null,8,["name"]))]))])),_:1}),(0,i._)("a",{class:"button",onClick:t[3]||(t[3]=e=>o.nextSong()),title:"Next Song"},[(0,i.Wm)(l,{name:"bi-skip-end-fill",class:"icon",scale:"2"})]),(0,i._)("a",{class:"button",id:"mode",onClick:t[4]||(t[4]=e=>o.switchMode(n.Mode[2].title)),title:n.Mode[2].title},[(0,i.Wm)(l,{name:n.Mode[2].icon,class:(0,R.C_)(["icon",{selected:2===n.modeIndex}]),scale:"1.2"},null,8,["name","class"])],8,Ce)]),(0,i._)("div",De,[(0,i._)("span",Ae,(0,R.zw)(o.currentTimeShow),1),(0,i._)("div",{onClick:t[5]||(t[5]=(...e)=>o.clickProgress&&o.clickProgress(...e)),onMouseover:t[6]||(t[6]=e=>n.showProgressDot=!0),onMouseleave:t[7]||(t[7]=e=>n.showProgressDot=!1),style:{width:"100%",height:"15px",margin:"0 1rem 0 1rem",cursor:"pointer",display:"flex","align-items":"center"}},[(0,i._)("div",Ve,[(0,i._)("div",{class:(0,R.C_)(["currentProgress",{"bar-active":n.showProgressDot}]),style:(0,R.j5)({width:n.currentProgressBar+"%"})},[n.showProgressDot?((0,i.wg)(),(0,i.iD)("div",je)):(0,i.kq)("",!0)],6)],512)],32),(0,i._)("span",Ie,(0,R.zw)(o.trackDurationShow),1)])]),(0,i._)("div",Ue,[We,(0,i._)("div",{onClick:t[8]||(t[8]=(...e)=>o.clickVolume&&o.clickVolume(...e)),onMouseover:t[9]||(t[9]=e=>n.showVolumeDot=!0),onMouseleave:t[10]||(t[10]=e=>n.showVolumeDot=!1),style:{width:"8rem",height:"15px",margin:"0 1rem 0 1rem",cursor:"pointer",display:"flex","align-items":"center"}},[(0,i._)("div",Be,[(0,i._)("div",{class:(0,R.C_)(["currentVolumeProgress",{"bar-active":n.showVolumeDot}]),style:(0,R.j5)({width:n.currentVolumeBar+"%"})},[n.showVolumeDot?((0,i.wg)(),(0,i.iD)("div",Ee)):(0,i.kq)("",!0)],6)],512)],32)])])}var qe={name:"musicPlayer",setup(){const e=P(),t=A();return{store:e,playerTracklistStore:t}},data(){return{musicPlaylist:this.playerTracklistStore.musicPlaylist,audio:"",posterLoad:!1,trackDuration:0,checkingCurrentPositionInTrack:"",showProgressDot:!1,showVolumeDot:!1,modeIndex:0,currentTime:0,currentProgressBar:0,currentVolumeBar:100,currentMode:null,Mode:[{title:"Order Play",icon:"ri-order-play-fill"},{title:"Shuffle Play",icon:"ri-shuffle-fill"},{title:"Single Cycle",icon:"ri-repeat-one-fill"}]}},methods:{timeFormat:function(e){return(e-(e%=60))/60+(9<e?":":":0")+e},switchMode:function(e){this.currentMode=e,("Shuffle Play"===this.currentMode&&1===this.modeIndex||"Single Cycle"===this.currentMode&&2===this.modeIndex)&&(this.currentMode=null),"Shuffle Play"===this.currentMode&&(this.modeIndex=1),"Single Cycle"===this.currentMode&&(this.modeIndex=2),null===this.currentMode&&(this.modeIndex=0)},prevIndex:function(){switch(this.modeIndex){case 0:this.playerTracklistStore.currentSong=(this.playerTracklistStore.currentSong-1+this.playerTracklistStore.musicPlaylist.length)%this.playerTracklistStore.musicPlaylist.length;break;case 1:this.playerTracklistStore.currentSong=Math.floor(Math.random()*this.playerTracklistStore.musicPlaylist.length);break;case 2:}return this.playerTracklistStore.currentSong},nextSong:function(){this.changeSong(this.nextIndex()),this.playerTracklistStore.waves_active=this.playerTracklistStore.currentSong},prevSong:function(){this.changeSong(this.prevIndex()),this.playerTracklistStore.waves_active=this.playerTracklistStore.currentSong},clickProgress:function(e){this.updateBar(e.pageX)},clickVolume:function(e){this.updateVolume(e.pageX)},updateVolume:function(e){var t=this.$refs.volumeProgress,s=e-t.getBoundingClientRect().left,r=100*s/t.offsetWidth;r>100&&(r=100),r<0&&(r=0),this.audio.volume=r/100,this.currentVolumeBar=r},updateBar:function(e){var t=this.$refs.progress,s=this.audio.duration,r=e-t.getBoundingClientRect().left,i=100*r/t.offsetWidth;i>100&&(i=100),i<0&&(i=0),this.audio.currentTime=s*i/100,console.log(this.audio.currentTime),console.log(s*i/100),this.currentTime=i/100,this.currentProgressBar=i},nextIndex:function(){switch(this.modeIndex){case 0:this.playerTracklistStore.currentSong=(this.playerTracklistStore.currentSong+1)%this.playerTracklistStore.musicPlaylist.length;break;case 1:this.playerTracklistStore.currentSong=Math.floor(Math.random()*this.playerTracklistStore.musicPlaylist.length);break;case 2:}return this.playerTracklistStore.currentSong},clickTrackTemplate(e){this.playerTracklistStore.currentlyPlaying||e==this.playerTracklistStore.currentSong?this.playerTracklistStore.currentlyPlaying&&e!=this.playerTracklistStore.currentSong&&(this.changeSong(e),this.playerTracklistStore.waves_active=e):(this.changeSong(e),this.playerTracklistStore.waves_active=e,this.playAudio())},changeSong:function(e,t=!0){var s=this.playerTracklistStore.currentlyPlaying;1==t&&this.stopAudio(),this.playerTracklistStore.currentSong=e;var r=this.store.mediaUrl+this.playerTracklistStore.musicPlaylist[this.playerTracklistStore.currentSong].song_path;this.audio=new Audio(r),this.posterLoad=!1,void 0!==this.playerTracklistStore.musicPlaylist[this.playerTracklistStore.currentSong].icon_path&&(this.posterLoad=!0);var i=this;this.audio.addEventListener("loadedmetadata",(function(){i.trackDuration=Math.round(this.duration)})),this.audio.addEventListener("ended",this.handleEnded),s&&this.playPauseAudio(this.playerTracklistStore.musicPlaylist.indexOf(this.playerTracklistStore.currentSong)),this.audio.volume=this.currentVolumeBar/100},playPauseAudio:function(e){this.playerTracklistStore.currentlyPlaying?(this.playerTracklistStore.waves_active=null,this.stopAudio()):(this.playerTracklistStore.waves_active=e,this.playAudio())},playAudio:function(){this.getCurrentTimeEverySecond(),this.playerTracklistStore.currentlyPlaying=!0,this.audio.play()},stopAudio:function(){this.audio.pause(),this.playerTracklistStore.currentlyPlaying=!1,clearTimeout(this.checkingCurrentPositionInTrack)},handleEnded:function(){this.changeSong(this.nextIndex()),this.playerTracklistStore.waves_active=this.playerTracklistStore.currentSong},getCurrentTimeEverySecond:function(){var e=this;this.checkingCurrentPositionInTrack=setTimeout(function(){e.currentTime=e.audio.currentTime,e.currentProgressBar=e.audio.currentTime/e.trackDuration*100,e.getCurrentTimeEverySecond()}.bind(this),500)}},created(){this.emitter.on("changeSong",((e,t=!0)=>{this.changeSong(e,t)}))},mounted(){this.emitter.on("playPauseAudio",(e=>{this.playPauseAudio(e)})),this.emitter.on("clickTrackTemplate",(e=>{this.clickTrackTemplate(e)})),this.changeSong(this.playerTracklistStore.currentSong,!1),this.audio.loop=!1},watch:{currentTime:function(){this.currentTime=Math.round(this.currentTime)}},computed:{currentTimeShow(){return this.timeFormat(this.currentTime)},trackDurationShow(){return this.timeFormat(this.trackDuration)}},beforeUnmount:function(){this.audio.pause(),this.audio.removeEventListener("ended",this.handleEnded),this.audio.removeEventListener("loadedmetadata",this.handleEnded),clearTimeout(this.checkingCurrentPositionInTrack)}};const ze=(0,M.Z)(qe,[["render",Oe],["__scopeId","data-v-37286237"]]);var Re=ze,Le={components:{Message:Q,VueTracklist:ve,MusicPlayer:Re},setup(){const e=P(),t=A();return{store:e,playerTracklistStore:t}},data(){return{type:null,header:null,hide_message:!0,field:null}},methods:{async getSongs(){b.get(this.store.mainUrl+"audio/songs").then((e=>{this.playerTracklistStore.setMusicPlaylist(e.data)})).catch((e=>{console.log(e);let t=e.response.data;this.field=t.detail,this.type="error",this.header=t.error,this.hide_message=!1}))}},beforeMount(){this.getSongs()}};const Ze=(0,M.Z)(Le,[["render",$]]);var Fe=Ze;const $e={class:"container mt-5"},He={class:"row"},Ge={class:"col-sm-6 mx-auto"},Xe={class:"mb-3",style:{width:"70%",display:"flex","flex-wrap":"wrap","align-content":"center"}},Ye=(0,i._)("label",{for:"username",class:"form-label"},"Username",-1),Qe={class:"mb-3"},Ke=(0,i._)("label",{for:"email",class:"form-label"},"Email",-1),Ne={class:"mb-3"},Je=(0,i._)("label",{for:"password",class:"form-label"},"Password",-1),et=(0,i._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1);function tt(e,t,s,a,n,o){const l=(0,i.up)("Message");return(0,i.wg)(),(0,i.iD)("div",$e,[(0,i.Wm)(l,{type:n.type,header:n.header,hide_message:n.hide_message,onReturned_show_value:t[0]||(t[0]=e=>n.hide_message=e)},null,8,["type","header","hide_message"]),(0,i._)("div",He,[(0,i._)("div",Ge,[(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,r.iM)(((...e)=>o.RegisterFunc&&o.RegisterFunc(...e)),["prevent"]))},[(0,i._)("div",Xe,[Ye,(0,i.wy)((0,i._)("input",{class:(0,R.C_)(["form-control",{highlighted:"username"===n.field}]),id:"username","onUpdate:modelValue":t[1]||(t[1]=e=>n.username=e)},null,2),[[r.nr,n.username]])]),(0,i._)("div",Qe,[Ke,(0,i.wy)((0,i._)("input",{type:"email",class:(0,R.C_)(["form-control",{highlighted:"email"===n.field}]),id:"email","onUpdate:modelValue":t[2]||(t[2]=e=>n.email=e)},null,2),[[r.nr,n.email]])]),(0,i._)("div",Ne,[Je,(0,i.wy)((0,i._)("input",{type:"password",class:(0,R.C_)(["form-control",{highlighted:"password"===n.field}]),id:"password","onUpdate:modelValue":t[3]||(t[3]=e=>n.password=e)},null,2),[[r.nr,n.password]])]),et],32),(0,i._)("button",{onClick:t[5]||(t[5]=(...e)=>o.test&&o.test(...e))},"Check")])])])}var st=null,rt={components:{Message:Q},setup(){const e=P();return{store:e}},data(){return{username:null,email:null,password:null,type:null,header:null,hide_message:!0,field:null}},methods:{async RegisterFunc(){this.username&&this.email&&this.password?b.post(this.store.mainAuthUrl+"register/",{username:this.username,email:this.email,password:this.password}).then((e=>{for(const[t,s]of Object.entries(e.data))this.field=null,this.type=t,this.header=s;this.hide_message=!1})).catch((e=>{let t=e.response.data;this.field=t.detail,this.type="error",this.header=t.error,this.hide_message=!1})):(this.type="error",this.header="Please ensure all fields are filled out",this.hide_message=!1)},test(){console.log("access:"+st)}}};const it=(0,M.Z)(rt,[["render",tt]]);var at=it;const nt={class:"container mt-5"},ot={class:"row"},lt={class:"col-sm-6 mx-auto"},ct={class:"mb-3"},ut=(0,i._)("label",{for:"email",class:"form-label"},"Email",-1),dt={class:"mb-3"},ht=(0,i._)("label",{for:"password",class:"form-label"},"Password",-1),mt=(0,i._)("button",{type:"submit",class:"btn btn-primary"},"Login",-1);function pt(e,t,s,a,n,o){const l=(0,i.up)("Message");return(0,i.wg)(),(0,i.iD)("div",nt,[(0,i.Wm)(l,{type:n.type,header:n.header,hide_message:n.hide_message,onReturned_show_value:t[0]||(t[0]=e=>n.hide_message=e)},null,8,["type","header","hide_message"]),(0,i._)("div",ot,[(0,i._)("div",lt,[(0,i._)("form",{onSubmit:t[3]||(t[3]=(0,r.iM)(((...e)=>o.login&&o.login(...e)),["prevent"]))},[(0,i._)("div",ct,[ut,(0,i.wy)((0,i._)("input",{type:"email",class:(0,R.C_)(["form-control",{highlighted:"email"===n.field}]),id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e)},null,2),[[r.nr,n.email]])]),(0,i._)("div",dt,[ht,(0,i.wy)((0,i._)("input",{type:"password",class:(0,R.C_)(["form-control",{highlighted:"password"===n.field}]),id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e)},null,2),[[r.nr,n.password]])]),mt],32)])])])}var gt={components:{Message:Q},setup(){const e=P();return{store:e}},data(){return{email:null,password:null,type:null,header:null,hide_message:!0,field:null}},methods:{async login(){const e=await this.store.getTokenFromBack(this.email,this.password);this.field=e.field,this.type=e.type,this.header=e.header,this.hide_message=e.hide_message}}};const yt=(0,M.Z)(gt,[["render",pt]]);var ft=yt;const kt={key:0,class:"mb-3"},vt=(0,i._)("label",{for:"email",class:"form-label"},"Email",-1);function _t(e,t,s,a,n,o){const l=(0,i.up)("Message");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(l,{type:n.type,header:n.header,hide_message:n.hide_message,onReturned_show_value:t[0]||(t[0]=e=>n.hide_message=e)},null,8,["type","header","hide_message"]),n.show_email_field?((0,i.wg)(),(0,i.iD)("div",kt,[vt,(0,i.wy)((0,i._)("input",{type:"email",class:(0,R.C_)(["form-control",{highlighted:"email"===e.field}]),id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e)},null,2),[[r.nr,n.email]]),(0,i._)("button",{onClick:t[2]||(t[2]=e=>o.SendMail())},"Send email")])):(0,i.kq)("",!0)],64)}var wt={components:{Message:Q},data(){return{email:null,token:null,type:null,header:null,hide_message:!0,show_email_field:!1}},methods:{GetToken(){this.token=this.$route.query.token},async SendToken(){this.GetToken(),b.post("https://music-platform228.herokuapp.com/auth/email-verify/",{token:this.token}).then((e=>{console.log();for(const[t,s]of Object.entries(e.data))this.type=t,this.header=s;this.hide_message=!1})).catch((e=>{let t=e.response.data;this.show_email_field=t.show_email_field,this.type="error",this.header=t.error,this.hide_message=!1}))},async SendMail(){this.email&&b.post("https://music-platform228.herokuapp.com/auth/resend-verification-link/",{email:this.email}).then((e=>{console.log();for(const[t,s]of Object.entries(e.data))this.type=t,this.header=s,console.log(`${t} ${s}`);this.hide_message=!1,this.show_email_field=!1})).catch((e=>{let t=e.response.data;this.show_email_field=t.show_email_field,this.type="error",this.header=t.error,this.hide_message=!1}))}},beforeMount(){this.SendToken()}};const St=(0,M.Z)(wt,[["render",_t]]);var Tt=St;const bt=[{path:"/",name:"Home",component:Fe},{path:"/auth/register",name:"register",component:at},{path:"/auth/login",name:"login",component:ft},{path:"/auth/email-verify/",name:"email-verify",component:Tt}],Pt=(0,z.p7)({history:(0,z.PO)(),routes:bt});var xt=Pt,Mt=s(7535),Ct=s(1373),Dt=s(4463),At=s(6564),Vt=s(1479),jt=s(7053);(0,Dt.Go)(At.Rl$,At.gAX,At.hpB,Vt.kbf,jt.xnq,jt.MIF,jt.a4s);const It=(0,k.WB)();It.use(U.Z);const Ut=(0,Ct.Z)(),Wt=(0,r.ri)(I);Wt.config.globalProperties.emitter=Ut,Wt.use(It).use(q).use(xt).component("v-icon",Dt.xt).mount("#app"),Wt.config.globalProperties.jsonp=Mt.R}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,r,i,a){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],i=e[u][1],a=e[u][2];for(var o=!0,l=0;l<r.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(o=!1,a<n&&(n=a));if(o){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,i,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,a,n=r[0],o=r[1],l=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var u=l(s)}for(t&&t(r);c<n.length;c++)a=n[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(3527)}));r=s.O(r)})();
//# sourceMappingURL=app.66b89e6a.js.map